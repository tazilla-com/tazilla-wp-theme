(()=>{"use strict";const e=window.wp.blocks,t=window.wp.data,a=window.wp.element,s=window.wp.blockEditor,c=JSON.parse('{"UU":"tazilla/features"}'),r=window.ReactJSXRuntime,l=(e,t)=>e.reduce((e,a)=>(a.name===t&&e.push(a),a.innerBlocks?.length&&e.push(...l(a.innerBlocks,t)),e),[]);(0,e.registerBlockType)(c.UU,{edit:({clientId:c,attributes:o,setAttributes:i})=>{const{activeFeatureId:n}=o,u=(0,s.useBlockProps)({className:"tazilla-features"}),{getBlocks:d}=(0,t.useSelect)(s.store),{insertBlock:f,removeBlock:I,updateBlockAttributes:k}=(0,t.useDispatch)(s.store),m=(0,t.useSelect)(e=>e(s.store).getBlocks(c),[c]),p=(0,a.useMemo)(()=>l(m,"tazilla/feature-button"),[m]),w=(0,a.useMemo)(()=>l(m,"tazilla/feature-content"),[m]);return(0,a.useEffect)(()=>{p.forEach(t=>{const a=t.attributes.featureId||t.clientId;if(!w.find(e=>e.attributes.featureId===a)){const t=(0,e.createBlock)("tazilla/feature-content",{featureId:a,className:"tazilla-feature-content"});f(t,void 0,c)}k(t.clientId,{activeFeatureId:n})}),w.forEach(e=>{p.find(t=>t.attributes.featureId===e.attributes.featureId)||I(e.clientId)})},[p.length,w.length,n]),(0,a.useEffect)(()=>{w.forEach(e=>{k(e.clientId,{activeFeatureId:n})})},[w,n]),(0,a.useEffect)(()=>{if(!n&&p.length>0){const e=p[0].attributes.featureId;i({activeFeatureId:e})}},[p,n]),(0,r.jsx)("div",{...u,children:(0,r.jsx)(s.InnerBlocks,{template:[["core/columns",{columns:2},[["core/column"],["core/column"]]]],templateLock:!1})})},save:({attributes:e})=>{const{activeFeatureId:t}=e,a=s.useBlockProps.save({className:"tazilla-features","data-active-feature-id":t||""});return(0,r.jsx)("div",{...a,children:(0,r.jsx)(s.InnerBlocks.Content,{})})}})})();