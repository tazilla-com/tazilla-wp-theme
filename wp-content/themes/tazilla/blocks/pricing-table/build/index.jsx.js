(()=>{"use strict";const e=window.wp.blocks,l=window.wp.blockEditor,t=window.wp.components,a=window.ReactJSXRuntime,i=window.wp.primitives;var n=(0,a.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)(i.Path,{d:"M19 3H4.8c-.9.1-1.7.9-1.8 1.8V19.2c.1 1 1 1.8 2 1.8h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2Zm-9 1.5h4v4h-4v-4ZM4.5 5c0-.3.2-.5.5-.5h3.5v4h-4V5Zm15 14c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5v-9h15v9Zm0-10.5h-4v-4H19c.3 0 .5.2.5.5v3.5Zm-8.3 10h1.5v-3h3V14h-3v-3h-1.5v3h-3v1.5h3v3Z"})}),c=(0,a.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)(i.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14.2c.1.9.9 1.7 1.8 1.8H19.2c1-.1 1.8-1 1.8-2V5c0-1.1-.9-2-2-2ZM8.5 19.5H5c-.3 0-.5-.2-.5-.5v-3.5h4v4Zm0-5.5h-4v-4h4v4Zm0-5.5h-4V5c0-.3.2-.5.5-.5h3.5v4Zm11 10.5c0 .3-.2.5-.5.5h-9v-15h9c.3 0 .5.2.5.5v14Zm-4-10.8H14v3h-3v1.5h3v3h1.5v-3h3v-1.5h-3v-3Z"})}),o=(0,a.jsx)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)(i.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6 5.5h12a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5ZM4 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6Zm4 10h2v-1.5H8V16Zm5 0h-2v-1.5h2V16Zm1 0h2v-1.5h-2V16Z"})});const r=window.wp.data,s=window.wp.i18n,h=JSON.parse('{"UU":"tazilla/pricing-table"}');(0,e.registerBlockType)(h.UU,{attributes:{caption:{type:"string",default:""},showCaption:{type:"boolean",default:!1}},edit({attributes:i,setAttributes:h,clientId:d}){const{caption:p,showCaption:v}=i,w=(0,l.useBlockProps)({className:"tazilla-pricing-table"}),{getBlock:g}=(0,r.useSelect)("core/block-editor"),{insertBlock:b}=(0,r.useDispatch)("core/block-editor"),x=g(d)?.innerBlocks||[],m=[["tazilla/pricing-table-header-row",{},Array.from({length:2},()=>["tazilla/pricing-table-header-cell"])],["tazilla/pricing-table-row",{},Array.from({length:2},()=>["tazilla/pricing-table-cell"])]];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.BlockControls,{children:(0,a.jsxs)(t.ToolbarGroup,{children:[(0,a.jsx)(t.ToolbarButton,{icon:n,label:(0,s.__)("Insert row","tazilla"),onClick:()=>{const l=(()=>{if(!x.length)return 0;const e=x.find(e=>e.innerBlocks?.length);return e?e.innerBlocks.length:0})(),t=Array.from({length:l},()=>(0,e.createBlock)("tazilla/pricing-table-cell")),a=(0,e.createBlock)("tazilla/pricing-table-row",{},t);b(a,void 0,d)}}),(0,a.jsx)(t.ToolbarButton,{icon:c,label:(0,s.__)("Insert column","tazilla"),onClick:()=>{x.forEach(l=>{const t="tazilla/pricing-table-header-row"===l.name,a=(0,e.createBlock)(t?"tazilla/pricing-table-header-cell":"tazilla/pricing-table-cell");b(a,void 0,l.clientId)})}}),(0,a.jsx)(t.ToolbarButton,{icon:o,label:(0,s.__)("Add caption","tazilla"),isPressed:v,onClick:()=>{h({showCaption:!v})}})]})}),(0,a.jsxs)("figure",{...w,children:[(v||p)&&(0,a.jsx)("figcaption",{children:(0,a.jsx)(l.RichText,{tagName:"h2",placeholder:(0,s.__)("Add table captionâ€¦","tazilla"),value:p,onChange:e=>h({caption:e})})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.InnerBlocks,{allowedBlocks:["tazilla/pricing-table-header-row","tazilla/pricing-table-row"],template:m,renderAppender:!1})})]})]})},save({attributes:e}){const{caption:t,showCaption:i}=e,n=l.useBlockProps.save({className:"tazilla-pricing-table"});return(0,a.jsxs)("figure",{...n,children:[(i||t)&&(0,a.jsx)("figcaption",{children:(0,a.jsx)(l.RichText.Content,{tagName:"h2",value:t})}),(0,a.jsx)("table",{children:(0,a.jsx)(l.InnerBlocks.Content,{})})]})}})})();